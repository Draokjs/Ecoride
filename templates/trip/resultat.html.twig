{% extends 'base.html.twig' %}

{% block body %}
<div class="container my-5">

  <h2 class="mb-4" id="result-title">Résultats :</h2>

  {% if trips is empty %}
    <p>Aucun trajet trouvé.</p>
  {% else %}
    <ul>
      {% for trip in trips %}
        <li>{{ trip.villeDepart }} → {{ trip.villeArrivee }} le {{ trip.dateDepart|date('d/m/Y') }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <div class="mb-4">
    <p id="valuedeparture" class="lead">{{ search.villeDepart|default('') }}</p>
    <p id="datedeparture" class="lead">{{ search.dateDepart|default('') }}</p>
    <div id="tripresultdate" class="alert alert-primary" role="alert"></div>
    <p id="tripstart" class="lead"></p>
    <p id="tripend" class="lead"></p>
    <p id="triplength" class="lead"></p>
  </div>
  
</div>
{% endblock %}

{% block javascripts %}
{% if search is not defined %}
  <script>console.error("Variable 'search' manquante dans Twig.");</script>
{% endif %}
<script>
 window.searchData = {
    departure: "{{ search.villeDepart|default('')|e('js') }}",
    arrival: "{{ search.villeArrivee|default('')|e('js') }}",
    dateDeparture: "{{ search.dateDepart|default('') }}",
    dateArrivee: "{{ search.dateArrivee|default('') }}",
    numberOfPassengers: {{ search.nombrePassagers|default(0) }}
};

</script>
{{ parent() }}
<script src="{{ asset('js/Resultat.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
{% endblock %}
